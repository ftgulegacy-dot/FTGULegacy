function initPayPal(){ if(typeof paypal==='undefined') return; paypal.Buttons({ createOrder:function(data,actions){ const amount='5.00'; return actions.order.create({purchase_units:[{amount:{value:amount}}]}); }, onApprove:function(data,actions){ return actions.order.capture().then(function(details){ alert('Thanks '+details.payer.name.given_name); if(window.firebase && firebase.firestore){ firebase.firestore().collection('donations').add({method:'paypal',amount:details.purchase_units[0].amount.value, payer:details.payer.email_address, created_at:firebase.firestore.FieldValue.serverTimestamp()}); } }); } }).render('#paypal-button-container'); }
function cashDonate(){ const cashtag = CASHAPP_CASHTAG || ''; if(!cashtag){ alert('CashApp not set'); return; } const amount = document.getElementById('cashAmount').value || '5'; const link = 'https://cash.app/$'+cashtag+'/'+amount; const qr = document.getElementById('cashQR'); qr.innerHTML = '<a href="'+link+'" target="_blank">Open Cash App</a><br><img src="https://chart.googleapis.com/chart?cht=qr&chs=200x200&chl='+encodeURIComponent(link)+'">'; if(window.firebase && firebase.firestore){ firebase.firestore().collection('donations').add({method:'cashapp',amount:amount,created_at:firebase.firestore.FieldValue.serverTimestamp()}); } }
document.addEventListener('DOMContentLoaded', initPayPal);
